<app-modal [isVisible]="isModalVisible" (close)="onModalClose()"/>
<div class="header-table d-flex justify-content-between my-3">
  <div class="actions-table d-flex align-items-center gap-3">
    <div class="input-search">
      <input
        type="text"
        pInputText
        placeholder="Pesquise pelo nome ou e-mail"
        [(ngModel)]="nameFiltered"
        (ngModelChange)="filteringTable()"
      />
    </div>
    <div class="select-filter">
      <p-dropdown
        [options]="statusOptions"
        [(ngModel)]="selectedStatus"
        placeholder="Filtrar"
        (onChange)="filteringTable()"
      >
      </p-dropdown>
    </div>
  </div>
  <div class="form-button">
    <button
      type="button" (click)="openModal()"
    >
      Novo usuário
    </button>
  </div>
</div>
<div class="content-table">
  <p-table
    [value]="dataFiltered"
    [paginator]="true"
    [rows]="5"
    [rowsPerPageOptions]="[5, 10, 20]"
    [showCurrentPageReport]="true"
  >
    <ng-template pTemplate="header">
      <tr class="header-line">
        <th class="ps-3">Usuários</th>
        <th>Status</th>
        <th pSortableColumn="creationDate">Data de criação</th>
        <th pSortableColumn="lastAcess">Último acesso</th>
        <th class="pe-3"></th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-user let-rowIndex="rowIndex">
      <tr
        class="body-line"
        [ngClass]="{ odd: rowIndex % 2 === 0, even: rowIndex % 2 !== 0 }"
      >
        <td class="ps-3">
          <div class="d-flex align-center gap-1">
            <div class="p-1">
              <img src="" alt="icon" class="icon" />
            </div>
            <div class="d-flex flex-column">
              <div class="fw-bold">{{ user.name }}</div>
              <div class="gray">{{ user.email }}</div>
            </div>
          </div>
        </td>
        <td
          [ngClass]="{
            ativo: user.status === 'Ativo',
            pendente: user.status === 'Pendente',
            bloqueado: user.status === 'Bloqueado'
          }"
        >
          <span>{{ user.status }}</span>
        </td>
        <td>{{ user.creationDate }}</td>
        <td>{{ user.lastAcess }}</td>
        <td class="pe-3"></td>
      </tr>
    </ng-template>
  </p-table>
</div>
